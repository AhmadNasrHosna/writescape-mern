(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{219:function(e,a,t){"use strict";t.r(a);var s=t(0),c=t.n(s),r=t(14),l=t(2),n=t.n(l),o=t(13),i=t(19);a.default=function(){const e=Object(s.useContext)(o.a),[a,t]=Object(r.a)({searchTerm:"",searchResults:[],show:"neither",requestCount:0});function l(a){"Escape"===a.key&&e({type:"closeSearch"})}return Object(s.useEffect)(()=>(document.addEventListener("keyup",l),()=>{document.removeEventListener("keyup",l)}),[]),Object(s.useEffect)(()=>{if(a.searchTerm.trim()){t(e=>{e.show="loading"});const e=setTimeout(()=>{t(e=>{e.requestCount++,e.show="loading"})},700);return()=>clearTimeout(e)}t(e=>{e.show="neither"})},[a.searchTerm]),Object(s.useEffect)(()=>{if(a.requestCount){const e=n.a.CancelToken.source();return async function(){try{const s=await n.a.post("/search",{searchTerm:a.searchTerm},{cancelToken:e.token});t(e=>{e.searchResults=s.data,e.show="results"})}catch(e){console.log("There was a problem or the request was canceled.")}}(),()=>e.cancel()}},[a.requestCount]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"search-overlay-top shadow-sm"},c.a.createElement("div",{className:"container container--narrow"},c.a.createElement("label",{htmlFor:"live-search-field",className:"search-overlay-icon"},c.a.createElement("i",{className:"fas fa-search"})),c.a.createElement("input",{onChange:function(e){const a=e.target.value;t(e=>{e.searchTerm=a})},autoFocus:!0,type:"text",autoComplete:"off",id:"live-search-field",className:"live-search-field",placeholder:"What are you interested in?"}),c.a.createElement("span",{onClick:()=>e({type:"closeSearch"}),className:"close-live-search"},c.a.createElement("i",{className:"fas fa-times-circle"})))),c.a.createElement("div",{className:"search-overlay-bottom"},c.a.createElement("div",{className:"container container--narrow py-3"},c.a.createElement("div",{className:"circle-loader "+("loading"==a.show?"circle-loader--visible":"")}),c.a.createElement("div",{className:"live-search-results "+("results"==a.show?"live-search-results--visible":"")},Boolean(a.searchResults.length)&&c.a.createElement("div",{className:"list-group shadow-sm"},c.a.createElement("div",{className:"list-group-item active"},c.a.createElement("strong",null,"Search Results")," (",a.searchResults.length," ",1==a.searchResults.length?"item":"items"," found)"),a.searchResults.map(a=>c.a.createElement(i.a,{post:a,key:a._id,onClick:()=>{e({type:"closeSearch"})}}))),!Boolean(a.searchResults.length)&&c.a.createElement("p",{className:"alert alert-danger text-center shadow-sm"},"Sorry, we could not find any results for that search. Try again.")))))}}}]);