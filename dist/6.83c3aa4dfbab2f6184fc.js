(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{218:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(16),s=a(3),r=a(2),o=a.n(r),u=a(5),m=a(13),i=a(6),d=a(7),f=a(15),p=a(17),E=a(107),b=a.n(E),h=a(20);t.default=function(){const e=Object(n.useContext)(u.a),t=Object(n.useContext)(m.a),{id:a}=Object(l.g)(),[r,E]=Object(n.useState)(!0),[w,y]=Object(n.useState)(),[g,j]=Object(n.useState)(!1),[k,N]=Object(n.useState)(0),[O,v]=Object(n.useState)(!1);if(Object(n.useEffect)(()=>{const e=o.a.CancelToken.source();return async function(){try{const t=await o.a.get("/post/"+a,{cancelToken:e.token});t.data?(y(t.data),E(!1)):j(!0)}catch(e){console.log("There was a problem or the request was canceled.")}}(),()=>e.cancel()},[a]),Object(n.useEffect)(()=>{if(k){const t=o.a.CancelToken.source();return async function(){try{"Success"==(await o.a.delete("/post/"+a,{data:{token:e.user.token}},{cancelToken:t.token})).data&&v(!0)}catch(e){console.log("There was a problem or the request was canceled.")}}(),()=>t.cancel()}},[k]),O)return t({type:"flashMessage",value:"Post successfully deleted!"}),c.a.createElement(l.a,{to:"/profile/"+e.user.username});if(g)return c.a.createElement(p.a,null);if(r)return c.a.createElement(i.a,{title:"..."},c.a.createElement(d.a,null,c.a.createElement(f.a,null)));const x=new Date(w.createdDate),S=`\n    ${x.getMonth()+1}/${x.getDate()}/${x.getFullYear()}\n  `;return c.a.createElement(i.a,{title:w.title},c.a.createElement(d.a,null,c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("h2",null,w.title),function(){if(e.loggedIn)return e.user.username==w.author.username}()&&c.a.createElement("span",{className:"pt-2"},c.a.createElement(s.b,{to:`/post/${a}/edit`,"data-tip":"Edit","data-for":"edit",className:"text-primary mr-2"},c.a.createElement("i",{className:"fas fa-edit"}))," ",c.a.createElement(h.a,{id:"edit",className:"custom-tooltip"}),c.a.createElement("a",{onClick:function(){window.confirm("Do you really want to delete this post permanently?")&&N(e=>e+1)},"data-tip":"Delete","data-for":"delete",className:"delete-post-button text-danger"},c.a.createElement("i",{className:"fas fa-trash"})),c.a.createElement(h.a,{id:"delete",className:"custom-tooltip"}))),c.a.createElement("p",{className:"text-muted small mb-4"},c.a.createElement(s.b,{to:"/profile/"+w.author.username},c.a.createElement("img",{className:"avatar-tiny",src:w.author.avatar})),"Posted by"," ",c.a.createElement(s.b,{to:"/profile/"+w.author.username},w.author.username)," ","on ",S),c.a.createElement("div",{className:"body-content"},c.a.createElement(b.a,{source:w.body}))))}}}]);